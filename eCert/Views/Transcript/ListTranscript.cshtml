@model eCert.Models.ViewModel.TranscriptViewModel
<script src="/assets/js/vendor/jquery-3.5.1.min.js"></script>
<script src="~/assets/js/custom/ListTranscript.js"></script>

<h2>Transcripts</h2>
<div class="card">
    <div class="card-body">
        
        <div class="row col-12 pr-0">
            <div class="form-group col-12 col-lg-3 pr-0 required">
                <label class="control-label">Education System: </label>
                <select class="form-control" id="EducationSystemId" name="EducationSystemId">
                    <option selected disabled>Select Education System</option>
                </select>
            </div>
            <div id="campus-select" class="form-group col-12 col-lg-3 pr-0 required">
                <label class="control-label">Campus: </label>
                <select class="form-control" id="CampusId" name="CampusId">
                    <option selected disabled>Select Campus</option>
                </select>
            </div>
            <div class="form-group col-12 col-lg-3 pr-0 required d-flex">
                <button type="button" onclick="getListTranscript()" class="btn btn-primary align-self-end" id="submitButton">Load subject</button>
            </div>
        </div>
        <div class="row col-12 pr-0">
            <div class="col-12 col-lg-3 pr-0">
                <p class="text-danger edu">Please select Education System</p>
            </div>
            <div class="col-12 col-lg-3 pr-0">
                <p class="text-danger campus">Please select Campus</p>
            </div>
        </div>
        
    <div class="listTranscript mt-2">
        @*@if (ViewBag.EduName != null && ViewBag.CampusName != null) { 
            <div class="col-12">
                <span>
                    Education System: @ViewBag.EduName
                </span>
                <span class="ml-3">
                    Campus: @ViewBag.CampusName
                </span>
            </div>
        }
        @if (ViewBag.Subject != null)
        {
            if (ViewBag.Subject.Count != 0)
            {
                <div class="table-responsive mt-2">
                    <table class="table table-centered mb-0">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Semester</th>
                                <th>Subject Code</th>
                                <th>Subject Name</th>
                                <th>Mark</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            @{
                                int index = 1;
                                for (int i = 0; i < ViewBag.Subject.Count; i++)
                                {
                                    using (Html.BeginForm("GenerateCertificate", "Transcript", FormMethod.Post, new { enctype = "multipart/form-data" }))
                                    {
                                        <input type="hidden" name="subjectCode" value="@ViewBag.Subject[i].SubjectCode" />
                                        <tr>
                                            <td>@index</td>
                                            <td>@ViewBag.Subject[i].Semester</td>
                                            <td>@ViewBag.Subject[i].SubjectCode</td>
                                            <td>@ViewBag.Subject[i].SubjectName</td>
                                            <td>@ViewBag.Subject[i].Mark</td>
                                            @if (ViewBag.Subject[i].IsGenerated)
                                            {
                                                <td>
                                                    <a href="@ViewBag.Subject[i].Link">View certificate</a>
                                                </td>
                                                <td>
                                                    <button class="btn btn-primary" type="submit">Regenerate certificate</button>
                                                </td>

                                            }
                                            else
                                            {
                                                <td>
                                                    <button class="btn btn-primary" type="submit">Generate certificate</button>
                                                </td>
                                            }

                                        </tr>
                                    }

                                    index++;
                                }
                            }

                        </tbody>
                    </table>

                </div>
            }
            else
            {
                <p>There is no subject</p>
            }

        }*@

    </div>
    </div>
</div>




@Html.Partial("_AlertDialog")

@if (TempData["Msg"] != null)
{
    <script type="text/javascript">
       $(document).ready(function () {
           var data = '@TempData["Msg"]';
           $.NotificationApp.send("Message", data, "top-center", "Background color", "Icon");
          });
    </script>
}
else if (ViewBag.Msg != null)
{
    <script type="text/javascript">
       $(document).ready(function () {
           var data = '@ViewBag.Msg';
           $('#alertModal').modal('show');
           $('#confirmTitle').html('Alert');
           $('.modal-body').html(data);
          });
    </script>
}